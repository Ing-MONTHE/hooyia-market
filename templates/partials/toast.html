<!-- ══════════════════════════════════════════════════
     TOAST CONTAINER — Notifications JS dynamiques
     Utilisé par api.js et les pages JS via window.toast()
══════════════════════════════════════════════════ -->
<div id="toast-container"
     class="fixed top-20 right-4 z-50 flex flex-col gap-2 max-w-sm w-full pointer-events-none">
  <!-- Les toasts sont injectés ici par JS -->
</div>

<script>
/**
 * window.toast(message, type, duration)
 * type : 'success' | 'error' | 'warning' | 'info'
 * Appelé par api.js et n'importe quelle page JS.
 */
window.toast = function(message, type = 'info', duration = 4500) {
  const container = document.getElementById('toast-container');
  if (!container) return;

  const icons = {
    success: '✓',
    error:   '✕',
    warning: '⚠',
    info:    'ℹ',
  };
  const colors = {
    success: 'bg-green-50  border-green-200  text-green-800',
    error:   'bg-red-50    border-red-200    text-red-800',
    warning: 'bg-amber-50  border-amber-200  text-amber-800',
    info:    'bg-white     border-cream-border text-ink',
  };

  const el = document.createElement('div');
  el.className = `pointer-events-auto flex items-start gap-3 px-4 py-3 rounded-xl shadow-card border animate-toast-in ${colors[type] || colors.info}`;
  el.innerHTML = `
    <span class="mt-0.5 flex-shrink-0 text-base leading-none font-semibold">${icons[type] || 'ℹ'}</span>
    <p class="text-sm font-body font-medium leading-snug flex-1">${message}</p>
    <button class="ml-1 opacity-40 hover:opacity-100 transition-opacity text-xs leading-none mt-0.5">✕</button>
  `;

  el.querySelector('button').addEventListener('click', () => dismiss(el));
  container.appendChild(el);

  const timer = setTimeout(() => dismiss(el), duration);

  function dismiss(node) {
    clearTimeout(timer);
    node.style.animation = 'toastOut 0.25s ease forwards';
    setTimeout(() => node.remove(), 250);
  }
};
</script>